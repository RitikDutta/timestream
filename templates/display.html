<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Display YouTube Video</title>
    <script>
        function seekTo(seconds) {
            var iframe = document.getElementById('youtube-iframe');
            iframe.src = iframe.src.split('?')[0] + '?start=' + seconds + '&autoplay=1';
        }

        function parseTimeToSeconds(time) {
            var parts = time.split(':');
            var seconds = 0;
            if (parts.length === 3) {
                seconds = parseInt(parts[0]) * 3600 + parseInt(parts[1]) * 60 + parseInt(parts[2]);
            } else if (parts.length === 2) {
                seconds = parseInt(parts[0]) * 60 + parseInt(parts[1]);
            } else if (parts.length === 1) {
                seconds = parseInt(parts[0]);
            }
            return seconds;
        }
    </script>
</head>
<body>
    <h1>Here is your video:</h1>
    <iframe id="youtube-iframe" width="560" height="315" src="{{ youtube_url }}" frameborder="0" allowfullscreen></iframe>
    <br>
    <a href="{{ url_for('index') }}">Go back</a>

    <h2>Transcript:</h2>
    <pre>
        {% for line in transcript %}
            {% set time = line.split(' ', 1)[0] %}
            {% set text = line.split(' ', 1)[1] %}
            <span onclick="seekTo(parseTimeToSeconds('{{ time }}'))" style="cursor: pointer; color: blue;">{{ time }}</span> {{ text }}<br>
        {% endfor %}
    </pre>
</body>
</html>
